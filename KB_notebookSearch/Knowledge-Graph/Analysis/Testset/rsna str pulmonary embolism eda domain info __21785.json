{"name": "rsna str pulmonary embolism eda domain info ", "full_name": " h1 RSNA STR Pulmonary Embolism h3 Table of content ", "stargazers_count": 0, "forks_count": 0, "description": "Right Ventricle Left Ventricle Ratio Go to TOCYour heart has 4 chambers. The proper way to compute RV LV ratio is to find the maximum diameter across all slices. Setting environment pathsFile descriptions in the given dataset is as follows test all test images directory train all train images directory note that your submission kernels will NOT have access to this set of images so you must build your models elsewhere and incorporate them into your submissions sample_submission. Right PE 3 9632 4. 1955 9632 Pulmonary embolism Acute vs Chronic https myradiotraining. Table of contentPart 1 Domain Info 9632 1. From the documentation we get the follwoing information about the columns of the dataframes. Currently CT pulmonary angiography CTPA is the most common type of medical imaging to evaluate patients with suspected PE. jpeg Note that PEs can occur anywhere in the lung vasculature which is very extensive and resembles a tree. Machine learning could help to more accurately identify PE cases which would make management and treatment more effective for patients. On the contrary exam label feature means you have to characterize that particular image exam or observation. The muscular chambers that do most of the pumping are known as the ventricles. png In the meantime check out my other ongoing works in this same competition RSNA STR Pulmonary Embolism Dummy Sub https www. al Right Ventricular Failure Pathophysiology Diagnosis And Treatment https www. com redwankarimsony rsna str 3d stacking 3d plot segmentation edit run 42517982 RSNA STR DICOM GIF npy https www. How is PE diagnosed Go to TOCThere are various tools for diagnosing PE however current practice relies primarily on CT angiography. Unlike the regular image files the DICOM files contains a lot of infomation in addition to the raw pixel values. You can easily extract those information from the dicom files and use them in the preprocessing steps of these CT Scans. As a title of the images I have set the maximum and minimum value of the pixel which explains why some of the slices are darker than the others. They are Field Code Variable Name Value 0020 0013 Instance Number IS 40 0028 0030 Pixel Spacing DS 0. Here all the images are unique. However immediate emergency treatment greatly increases your chances of avoiding permanent lung damage. net publication 233889701_The_Ratio_of_Descending_Aortic_Enhancement_to_Main_Pulmonary_Artery_Enhancement_Measured_on_Pulmonary_CT_Angiography_as_a_Finding_to_Predict_Poor_Outcome_in_Patients_with_Massive_or_Submassive_Pulmona 9632 Acute and Chronic Pulmonary Emboli Angiography CT Correlation https www. Central PE 5 9632 6. Still we are not able to see a live scrolling among the slides. Let s print out the data fields of the training data frame. Also note that Acute PE is not an explicit label but is implied by the lack of Chronic PE or A cute and Chronic PE. A high ratio is suggestive of right heart strain. Timely and accurate diagnosis will help these patients receive better care and may also improve outcomes. They are QA Contrast QA Motion True filling defect not PE and Flow artifact and are not scored but are meant to be used as helpers. Right Ventricle Left Ventricle Ratio 7 9632 8. Now let s have a look at the images of the training set. Now let s have a look at the actual data itself. In addition to them there are lot of important information in the dicom file. 245045008 asset images medium g04se15g07x. This suggests a more severe PE because the blood clot is forcing your right heart to work harder and causing blood to become backed up into the right ventricle it s just plumbing. jpg generation 1599575183749576 alt media Test Data FrameNow let s have a look at the test dataframe. For example In the above calculation we have 650 examination and 146853 images in total. With 60 000 100 000 PE deaths annually in the United States it is among the most fatal cardiovascular diseases. In that case each exam will have multiple images. We can measure the ratio of diameters of the right ventricle to the left ventricle to see if this is high. PEs typically arise from blood clots in the leg veins deep vein thromboses or DVTs that dislodge and become trapped in the pulmonary vasculature. Ian Pan https www. In addition if the patient is moving a lot or has metal in their body this can cause artifacts which may obscure a clot. Now in the following part of this notebook we will try to print the scans in a sequence. com redwankarimsony rsna str dicom gif npy RSNA STR Pulmonary Embolism EDA https www. Note this is where quality issues can occur. com download storage v1 b kaggle user content o inbox 2F115173 2Fa2a5ee66b5799274141dd547cc3ea466 2FPE 20figure. The pulmonary trunk the green annotated part in the image is a major blood vessel that comes from the right side of your heart to supply blood to your lungs. sort key lambda x int x. jpeg 9632 Mattia Arrigo et. CT scan shows a pulmonary embolus within the posterobasal segment of the right lower lobe artery arrow. This is evidence of a pulmonary embolism in the blood vessel as the blood clot prevents the contrast from filling up the entire vessel. The blockage can be life threatening. com articles Right Ventricular Failure 9632 The Ratio of Descending Aortic Enhancement to Main Pulmonary Artery Enhancement Measured on Pulmonary CT Angiography as a Finding to Predict Poor Outcome in Patients with Massive or Submassive Pulmonary Embolism https www. Left PE Go to TOC right PE https pubs. Let s have a look at the dataframes. Generally acute sudden onset PEs are more likely to cause symptoms as your body has not had time to adapt to the presence of a clot. Here one thing should be very clear that one exam has many images. org 9632 https prod images static. jpeg In the image above Acute occlusive pulmonary embolism in a 32 year old woman who presented with chest pain. The following image is a flowchart outlining the relationships between labels. Now we will just have a look at a single exam and will observe if the images are of same patient or different patient. Importing Libraries 2. That giant ball just off center in this image is the heart. SOPInstanceUID UID unique ID for each image within the study and data pe_present_on_image image level notes whether any form of PE is present on the image. qa_motion informational indicates whether radiologists noted an issue with motion in the study. qa_contrast informational indicates whether radiologists noted an issue with contrast in the study. SeriesInstanceUID UID unique ID for each series within the study. Large or multiple blood clots can be fatal. In particular you ll use chest CTPA images grouped together as studies and your data science skills to enable more accurate identification of PE. Do some little checks on the pixel array Here among these large number of parameter there are several paramers that a radiologist must have a good understanding of. Note how bright the blood vessels are this is due to the intravenous contrast. negative_exam_for_pe exam level whether there are any images in the study that have PE present. com redwankarimsony ct scans dicom files windowing explained RSNA STR PE Gradient Sigmoid Windowing https www. org images 807719 db43f21911fc4f6f8522ca7a3af124_gallery. There are imaging findings that can distinguish acute from chronic PEs but this can be challenging to discern. It can damage part of the lung due to restricted blood flow decrease oxygen levels in the blood and affect other organs as well. As the use of imaging continues to grow constraints of radiologists time may contribute to delayed diagnosis. The artery is enlarged compared with adjacent patent vessels. Sometimes the timing of the scan is off resulting in a suboptimal scan. References Go to TOC 9632 Pulmonary Embolism A Brief Intro https www. Sequential Read So far we have been able to print the random CT Scan Slices of the patient. com png middle 265 2655834_work in progress icon. Central PE Go to TOC central PE https prod images static. How is PE diagnosed 2 9632 3. com redwankarimsony rsna str pulmonary embolism dummy sub CT Scans DICOM files Windowing Explained https www. 0 0028 1052 Rescale Intercept DS 1024. com redwankarimsony rsna str pe gradient sigmoid windowing RSNA STR 3D Stacking 3D Plot Segmentation https www. jpeg In the image above Acute pulmonary embolism in a 58 year old woman who presented with chest pain and dyspnea. Right PE Go to TOC left PE https pubs. flow_artifact informational rv_lv_ratio_gte_1 exam level indicates whether the RV LV ratio present in the study is 1 rv_lv_ratio_lt_1 exam level indicates whether the RV LV ratio present in the study is 1 leftsided_pe exam level indicates that there is PE present on the left side of the images in the study chronic_pe exam level indicates that the PE in the study is chronic true_filling_defect_not_pe informational indicates a defect that is NOT PE rightsided_pe exam level indicates that there is PE present on the right side of the images in the study acute_and_chronic_pe exam level indicates that the PE present in the study is both acute AND chronic central_pe exam level indicates that there is PE present in the center of the images in the study indeterminate exam level indicates that while the study is not negative for PE an ultimate set of exam level labels could not be created due to QA issues What is image level and exam level features In this competition image level feature prediction means you have to find predict that particular feature for each of the image separately. These CT scans consist of hundreds of images that require detailed review to identify clots within the pulmonary arteries. Submission size calculation for correctness Here among the labels given in the training data pe_present_on_image is the image level feature that needs to be predicted for all the images. Now let us have a look at the sample submission file so that we can understand what to predict from all the images. Here the first one is the StudyInstanceUID SeriesInstanceUID and SOPInstanceUID are strings and the rest 13 are int64 which are essentially boolian data. 0 0028 1053 Rescale Slope DS 1. Without these parameters it will be very difficult to fully utilize the potential of the CT Scans. Chronic PE Go to TOC Not all PEs result in symptoms. Intravenous contrast is administered through the patient s veins just prior to obtaining the CT and the CT scan is timed to obtain images when the contrast is primarily in the pulmonary blood vessels. 0 0028 1051 Window Width DS 400. com redwankarimsony rsna str pulmonary embolism eda data reading and manipulation libraries navigation and directory management libraries data visualization libraries Machine Learning Libraries labels train_df train_df. Intuitively this makes sense if you have a blockage in the blood vessels in your lungs the right side of your heart has to work a lot harder to try and pump blood through the obstruction. The maximum diameters of each ventricle are usually on different slices. Because of its importance as a prognostic indicator detecting RV LV ratio 1 in this competition is weighed most heavily across all the other classes. jpg Notice how the upper left part right ventricle is much larger than the lower right part left ventricle. For more on this topic you can have a look at this paper Acute and Chronic Pulmonary Emboli Angiography CT Correlation https www. We see that we have only three columns. Treatment of PE Go to TOCTreatment depends on the severity of the clot. CT scan demonstrates a pulmonary embolus that results in an eccentrically positioned partialfilling defect which is surrounded by contrast material and forms acute angles with the arterial wall arrows is left PE5. This is because the left ventricle has a much harder job to do pump body throughout the entire body versus just the lungs. This can result in non diagnostic or equivocal studies. An interventional radiologist inserts a catheter into the pulmonary blood vessels to deliver clot busting medication directly to the clot. Chronic PE 6 9632 7. If successful you ll help reduce human delays and errors in detection and treatment. Normally your left ventricle lower right is larger than your right ventricle upper left like in this image above. In the following image 15 of the images are just displayed. References 9 Part 2 Exploratory Data Analysis EDA 9632 10. Typically we will use blood thinners either IV or oral. Here the prediction is based on the experiment examination. It is time consuming to confirm a PE and prone to overdiagnosis. Lets make a function to read data from the dicom file. csv contains UIDs. Left PE 4 9632 5. jpg This image shows a single axial slice of a CT pulmonary angiogram CTPA or CTPE at this level of the pulmonary trunk. What is Pulmonary Embolism PE 1 9632 2. csv contains UIDs and all labels. However just printing and looking at the random slices don t make any sense because they have a particular sequence and they only make sense in that particualr sequence. So the total number of rows in the submission file will Here for each of the image we must have to predict the property pe_present_on_image which actually indicates wherther Pulmonary Embolism PE is present in the image. com p pulmonary embolism acute vs chronic. 245045008 asset images medium g04se15g04x. Please note that this is a 3D image. But for that whole group we will submit only one set of prediction for those following labels negative_exam_for_pe rv_lv_ratio_gte_1 rv_lv_ratio_lt_1 leftsided_pe chronic_pe rightsided_pe acute_and_chronic_pe central_pe indeterminate Therefore our prediction file should have a number of rows equal to N_ img N_ exams N_ examlevelfeature. Rarely surgery may be required. Therefore it has a row for each image for which you will be predicting the existence of a pulmonary embolism within the image and row for each study label that requires a study level prediction. squeeze labels. com c rsna str pulmonary embolism detection discussion 182376 by Dr. A pulmonary embolism PE is caused by an artery blockage in the lung. Unlike the previous image there are areas in the blood vessels marked in red that are more gray. jpeg In this image above notice how there are filling defects in the pulmonary trunk. RSNA STR Pulmonary EmbolismIf every breath is strained and painful it could be a serious and potentially life threatening condition. Treatment of PE 8 9632 9. Your right ventricle pumps blood to your lungs your left ventricle pumps blood to the rest of your body. org images 17483790 2cc61c62b20f31c98b8b9df642b4d9_gallery. Note that there are four labels in the training set that are purely informational and require no predictions. In this competition you ll detect and classify PE cases. 0 These parameters are must needed for preprocessing the CT Scans. Field Name Feature Type Description StudyInstanceUID UID unique ID for each study exam in the data. In the above image just the images are printed irrespective of any of the patients. InstanceNumber reverse False convert ouside pixel values to air I m using 1000 to be sure that other defaults are captured as well convert to HU. Let s have a look at the additional paramers stored in the dicom files. org images 36787671 60da4496798220ab2a3b52f1978e49_gallery. Utility functions 4. We see that there are 16 fields in total among them the first three are the identifiers IDs. What is Pulmonary Embolism PE Go to TOCA pulmonary embolism PE is a blood clot in the blood vessels of the lungs that can be potentially life threatening. org diseases conditions pulmonary embolism symptoms causes syc 20354647 it results in the death of one third of people who go undiagnosed or untreated. com vaillant 9632 https www. SOPInstanceUID path 16 4. https prod images static. jpg However having a PE can put a big strain on the right side of your heart. 871094 0028 1050 Window Center DS 40. What can we do We can make a nice gif animation and view that. If you want to have a in depth look inside reading dicom files you can have a look at its official documentation. Sometimes we can see evidence of this on the CT we call this right heart strain. Loading Libraries 10 1. According to the Mayo Clinic https www. This type of PE would be a central PE in our dataset it is in the central blood vessel of the lungs. So the class of this is a CT scan the implementation is dcm4che potentially expanded form DCM for Chest and you have all the standard metadata of a DICOM file for the lungs. jpg In this image notice how there are filling defects in red color in the pulmonary trunk. And the rest of the features will be predicted for only the exam. Patients can have multiple PEs across both lungs hence we have labels for right sided left sided and central PEs but these are not mutually exclusive which means same image can have more than one sided PEs. values for path in patient_image_paths labels np. This patient is having a severe PE causing significant right heart strain. csv contains rows for each UID label combination that requires a prediction. The clinical presentation of PE can vary from asymptomatic to severe illness requiring intensive care shock cardiac arrest etc. However the finding we are looking for is the same filling detects. org images 17056972 2ef2ae41c8a0b5a070aa21140a14e0_gallery. In severe cases we may attempt catheter directed thrombolysis. jpg Remember everything is flipped in radiology so the RIGHT SIDE of the body is on the LEFT and vice versa. Now we have the images of 512x512 size we can have a look at the distribution of the pixel values. ", "id": "redwankarimsony/rsna-str-pulmonary-embolism-eda-domain-info", "size": "21785", "language": "python", "html_url": "https://www.kaggle.com/code/redwankarimsony/rsna-str-pulmonary-embolism-eda-domain-info", "git_url": "https://www.kaggle.com/code/redwankarimsony/rsna-str-pulmonary-embolism-eda-domain-info", "script": "read_dicom display tqdm sample_stack plot_bar numpy matplotlib.pyplot load_slice tqdm.notebook tensorflow YouTubeVideo transform_to_hu IPython IPython.display ", "entities": "(('which', 'clot'), 'cause') (('left ventricle', 'body'), 'pump') (('CT scan', 'lobe artery right lower arrow'), 'show') (('left', 'ventricle'), 'Notice') (('Go', 'clot'), 'depend') (('embolism pulmonary PE', 'lung'), 'cause') (('Central PE', 'PE https TOC central prod'), 'go') (('it', 'lungs'), 'be') (('you', 'detection'), 'help') (('com redwankarimsony ct scans', 'RSNA STR PE Gradient Sigmoid Windowing https www'), 'dicom') (('giant ball', 'image'), 'be') (('when contrast', 'blood primarily pulmonary vessels'), 'administer') (('it', 'right ventricle'), 'suggest') (('right side', 'obstruction'), 'make') (('This', 'non diagnostic studies'), 'result') (('which', 'very tree'), 'Note') (('we', 'catheter directed thrombolysis'), 'attempt') (('image level that', 'images'), 'be') (('particular you', 'PE'), 'use') (('radiologists', 'study'), 'indicate') (('you', 'paper'), 'have') (('that', 'study level prediction'), 'have') (('why some', 'others'), 'as') (('you', 'submissions sample_submission'), 'set') (('They', 'helpers'), 'be') (('It', 'PE'), 'be') (('parameters', 'CT Scans'), '0') (('PEs', 'symptoms'), 'go') (('It', 'other organs'), 'damage') (('Here prediction', 'experiment examination'), 'base') (('data pe_present_on_image image form', 'image'), 'note') (('Sometimes timing', 'off suboptimal scan'), 'be') (('Typically we', 'IV'), 'use') (('artery', 'patent adjacent vessels'), 'enlarge') (('Sequential So far we', 'patient'), 'Read') (('maximum diameters', 'usually different slices'), 'be') (('same image', 'more than one sided PEs'), 'have') (('first three', 'them'), 'see') (('high ratio', 'heart right strain'), 'be') (('we', 'dataframes'), 'get') (('patients', 'also outcomes'), 'help') (('com redwankarimsony rsna str dicom gif', 'RSNA Embolism EDA https STR Pulmonary www'), 'npy') (('time', 'delayed diagnosis'), 'contribute') (('that', 'lungs'), 'go') (('that', 'pulmonary vasculature'), 'arise') (('blood clot', 'entire vessel'), 'be') (('interventional radiologist', 'directly clot'), 'insert') (('which', 'wall arterial arrows'), 'demonstrate') (('you', 'official documentation'), 'have') (('we', 'pixel values'), 'have') (('you', 'image particular exam'), 'mean') (('severe PE', 'heart significant right strain'), 'have') (('they', 'particualr sequence'), 'make') (('we', 'images'), 'let') (('Still we', 'slides'), 'be') (('Pulmonary Embolism actually wherther PE', 'image'), 'so') (('rest', 'only exam'), 'predict') (('we', '146853 total'), 'have') (('References', 'Pulmonary Embolism A Brief Intro https TOC 9632 www'), 'go') (('that', 'pulmonary arteries'), 'consist') (('com png', 'progress icon'), 'middle') (('management', 'more patients'), 'help') (('proper way', 'slices'), 'be') (('str 3d', 'RSNA STR DICOM GIF npy https 42517982 www'), 'run') (('emergency However immediate treatment', 'lung permanent damage'), 'increase') (('we', 'sequence'), 'try') (('however current practice', 'CT primarily angiography'), 'diagnose') (('who', 'chest pain'), 'jpeg') (('following image', 'labels'), 'be') (('you', 'PE cases'), 'detect') (('acute_and_chronic_pe prediction negative_exam_for_pe rv_lv_ratio_gte_1 Therefore file', 'N _ equal img'), 'submit') (('PE', 'negative_exam_for_pe exam study'), 'level') (('it', 'CT Scans'), 'be') (('DICOM files', 'pixel raw values'), 'contain') (('clinical presentation', 'care arrest intensive shock cardiac etc'), 'vary') (('you', 'image'), 'indicate') (('We', 'that'), 'do') (('However PE', 'heart'), 'jpg') (('several radiologist', 'good understanding'), 'do') (('RIGHT SIDE', 'LEFT'), 'remember') (('left ventricle', 'just lungs'), 'be') (('who', 'people'), 'cause') (('that', 'ventricles'), 'know') (('images', 'same patient patient'), 'have') (('15', 'images'), 'display') (('that', 'purely predictions'), 'note') (('s', 'test dataframe'), 'let') (('very one exam', 'many images'), 'be') (('CT angiography Currently pulmonary CTPA', 'suspected PE'), 'be') (('it', 'most fatal cardiovascular diseases'), 'be') (('s', 'dicom files'), 'let') (('exam', 'multiple images'), 'have') (('Acute Also PE', 'Chronic PE'), 'note') (('you', 'lungs'), 'be') (('Lets', 'dicom file'), 'make') (('image', 'pulmonary trunk'), 'jpg') (('s', 'training data frame'), 'let') (('this', 'left ventricle'), 'measure') (('com redwankarimsony str embolism dummy sub CT pulmonary Scans', 'Windowing Explained https www'), 'rsna') (('lower right', 'image'), 'be') (('other defaults', 'as well HU'), 'convert') (('Right Ventricle Left Ventricle Ratio', '4 chambers'), 'go') (('that', 'prediction'), 'contain') (('just images', 'patients'), 'print') (('that', 'red'), 'be') (('Now s', 'actual data'), 'let') (('we', 'CT'), 'see') (('blood major that', 'lungs'), 'be') (('Right Ventricle', 'Ventricle Ratio'), 'leave') (('this', 'intravenous contrast'), 'note') (('Now s', 'training set'), 'let') (('You', 'CT Scans'), 'extract') (('body', 'clot'), 'acute') (('this', 'discern'), 'be') ", "extra": "['biopsy of the greater curvature', 'disease', 'onset', 'outcome', 'patient', 'test', 'diagnosis', 'lung']", "label": "Perfect_files", "potential_description_queries": ["air", "animation", "array", "artifact", "asset", "asymptomatic", "avoiding", "become", "blood", "body", "build", "calculation", "call", "care", "case", "cause", "center", "check", "chest", "classify", "clear", "clot", "color", "competition", "compute", "content", "contrast", "convert", "could", "csv", "ct", "current", "damage", "data", "dataset", "defect", "delayed", "depth", "detect", "detection", "diagnosis", "dicom", "directly", "directory", "distribution", "download", "dummy", "eda", "enable", "environment", "equal", "evaluate", "every", "everything", "evidence", "examination", "experiment", "explained", "extract", "feature", "file", "find", "flow", "following", "form", "function", "generation", "gradient", "green", "group", "grouped", "grow", "heart", "help", "high", "human", "image", "img", "implementation", "importance", "improve", "int", "int64", "issue", "job", "kaggle", "key", "label", "learning", "left", "let", "level", "life", "little", "look", "looking", "lot", "lower", "lung", "major", "maximum", "measure", "medical", "metadata", "middle", "minimum", "most", "motion", "multiple", "my", "negative", "no", "non", "not", "notebook", "number", "official", "onset", "out", "parameter", "part", "path", "patient", "people", "pixel", "plot", "png", "potential", "practice", "predict", "prediction", "preprocessing", "present", "print", "printing", "property", "publication", "random", "ratio", "raw", "read", "reading", "reduce", "rest", "result", "reverse", "review", "right", "row", "run", "sample", "scan", "science", "segment", "segmentation", "sense", "sequence", "set", "several", "side", "sigmoid", "single", "size", "slice", "sort", "standard", "storage", "str", "sub", "submission", "surgery", "test", "those", "through", "time", "title", "topic", "total", "train", "training", "treatment", "try", "type", "understanding", "unique", "up", "upper", "user", "value", "view", "visualization", "while", "who", "work", "year"], "potential_description_queries_len": 195, "potential_script_queries": ["display", "numpy", "tensorflow", "tqdm"], "potential_script_queries_len": 4, "potential_entities_queries": ["current", "dicom", "equal", "level", "major", "prediction", "right", "sub"], "potential_entities_queries_len": 8, "potential_extra_queries": ["biopsy"], "potential_extra_queries_len": 1, "all_components_potential_queries_len": 200}