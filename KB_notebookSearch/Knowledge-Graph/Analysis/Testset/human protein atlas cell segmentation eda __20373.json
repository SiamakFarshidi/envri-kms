{"name": "human protein atlas cell segmentation eda ", "full_name": " h2 Human Protein Atlas Single Cell Classification h3 Find individual human cell differences in microscope images h1 Table of contents h1 1 Version Notes h1 2 Introduction h2 What is Human Protein Atlas h2 Competition Goal Brief Introduction h2 What is weak image level labels h2 About Competition Data ", "stargazers_count": 0, "forks_count": 0, "description": "png for the PNG files. It may be possible that not all cells in the image contain protein and so we need to only assign labels to those cells for which the protein in present. sample_submission. Nucleoli fibrillar center 4. Colors are red for microtubule channels blue for nuclei channels yellow for Endoplasmic Reticulum ER channels and green for protein of interest. Cytosol The cytosol is a semi fluid matrix that fills the space between the plasma membrane and the nuclear membrane and embedding various organelles and cellular substructures. That is to say each training image contains a number of cells that have collectively been labeled. Please go through this section thouroghly to develop understanding for the competiton goal and data. Data Overview 4 5. For more information regarding evaluation metric check here https www. Introduction 1 Evaluation Metric Mean Average Precision mAP 1. com lnhtrang single cell patterns 1. Please visit this https www. The prediction task is to look at images of the same type and predict the labels of each individual cell within those images. The membrane is composed of phospholipids cholesterol glycolipids and a large fraction of membrane proteins organized together in different domains. We want to visualize those images which have single label to get proper understanding of the orgenelles. Paper http ca. This means for every train image we are given multiple labels. For each sample we have 4 image files. com c hpa single cell image classification data section of the competition in Introduction 1 section above we can see every sample has multiple label. png test test image directory. Exploratory Data Analysis 5 5. com lnhtrang hpa public data download and hpacellseg notebook https www. Matrix Completion for Weakly supervised Multi label Image Classification. 2 Exploring Image Data 5. During the challenge you will both need to segment the cells in the images and predict the labels of those segmented cells. The green filter should hence be used to predict the label and the other filters are used as references. Aggresome Aggresomes are structures that form in response to accumulation of misfolded proteins in the cytosol. The CellSegmentator class takes in following arguments nuclei_model This should be a string containing the path to the nuclei model weights. Competition Goal Brief Introduction Table of contents 0. Yellow for Endoplasmic Reticulum ER channels. 1 6 Exploratory Data Analysis 6. First we need to segment each cell in the image and then assign it appropriate label. Most labels seems to have occurence less than 2000. com c hpa single cell image classification discussion 219885 for more information. This means we are predicting protein organelle localization labels for each cell in the image. Very small number of samples seems to have more than 3 labels. We are the prediciting location organelle where the protein is targeted in a single cell. They can appear similar to microtubules but do not match well with the staining in the red microtubule channel. csv The PredicitionString column contains a string of label confidence score for that classified label organelle and mask information ecoded in RLE encoding and we are doing this for every cell present in the image. The size and exact shape of the mitotic spindle changes during mitotic progression clearly reflecting the different stages of mitosis. The data in the Human Protein Atlas database https www. scale_factor This value determines how much the images should be scaled before being fed to the models. Plasma membrane 14. For more details check here https www. Vesicles and punctate cytosolic patterns 18. png 000a6c98 bb9b 11e8 b2b9 ac1f6b6435d0_green. Nuclear speckles Nuclear speckles are self organizing non membrane bound sub compartments found in the interchromatin regions of the nucleoplasm. Observations 48 samples have only 1 label 40 have 2 labels per image. padding If True add some padding before feeding the images to the neural networks. Leveraging Instance Image and Dataset Level Information for Weakly Supervised Instance Segmentation. com CellProfiling HPA Cell Segmentation tool provided by the competition host. What we are prediciting Table of contents 0. Endoplasmic reticulum 7. 3 Label Wise Cell Segmentation 5. For each filename there are 4 files images in train directory. We will post process the generated cell masks using the label_cell method followed by the pred_cells method to generate cell segmentations. 4 Label Wise Single Cell Segmentation 5. csv table representation. com c hpa single cell image classification discussion 219885 basic visualize segmentation tool directory read and visualize sample image read and visualize sample image segment cell plot segmented cells mask image plot single segmented cells mask image spliting label column class labels binarizing each label class rename column. About Competition DataWe are provided with following files train. Version 20 Visualize images for single label organelle. Golgi apparatus The Golgi apparatus is a central hub in the endomembrane system of human cells placed at the intersection of the endosomal secretory and lysosomal pathways. When a cell is dividing the two centrosomes move to opposite ends of the cell and form the poles of the mitotic spindle. png 000a6c98 bb9b 11e8 b2b9 ac1f6b6435d0_yellow. 2 Exploring Image Data Table of contents 0. They vary in shape size and numbers depending on the type of bodies as well as cell type but are usually more rounded compared to nuclear speckles. pdf Code https github. It may be possible that some of the cells in the image may not have the protein of interest. Nuclear speckles 5. Golgi apparatus 8. Nuclear membrane 2. com c hpa single cell image classification discussion 215736 awesome discussion to know more. Otherwise the version trained with only two channels microtubules and nuclei will be used. Intermediate filaments 9. com lnhtrang hpa public data download and hpacellseg notebook. com joshi98kishan my teammate for suggesting this and helping me with this work. Valid values are cpu or cuda or pointed cuda device like cuda 0. This fluid contains primarily water dissolved ions and a complex mixture of molecules. This means that the cells have no green staining negative or have staining but no pattern can be deciphered from the staining unspecific. 1 Please check this discussion here https www. com c hpa single cell image classification discussion 217395 1. The training image level labels are provided for each sample in train. The majority of the vesicles are membrane bound organelles however also large protein complexes and cytosolic bodies can fall under this category as they are difficult to distinguish. cell_model This should be a string containing the path to the cell model weights. Import Packages Table of contents 0. Puzzle CAM Improved localization via matching partial and full features Code https github. 1 Version 12 Updated EDA for bar graph explanation. 1 For segmenting cells we will use the HPA Cell Segmentation https github. 1 Let us first understand what is protein targeting So Protein targeting or protein sorting is the biological mechanism by which proteins are transported to their appropriate destinations within or outside the cell. The Protein of interest Green channel is what we are prediciting for each sample with labels multiple labels. Each train images sample has four files. Utility Table of contents 0. Version 21 Updated submission. 1 Train Data Table of contents 0. Reference Table of cotents 0. Mitochondria are small organelles distr\u00edbuted in varying numbers and patterns in the cytosol of most human cells. For each image we need to segment every cell present in it and identify the label organelle of each cell out of 19 and submit a string such that it contains a list of instance segmentation masks and their associated detection score Confidence and segmentation mask for each cell. Useful Resources 6 6. Centrosome This class includes centrosomes and centriolar satellites. Mitotic spindle 12. Missing Values Unique Values 5. We are provided with images of microscopic cells and corresponding labels of protein location assigned together for each cells in the image. We have to develop models capable of segmenting and classifying each individual cell with precise labels. org is freely accessible to scientists all around the world that allows them to explore the cellular makeup of the human body. 1 This is segmentation and classification problem. 1 Since we are given multiple label in our Label column we need to binarize them so that each label class will become a column. Negative Label Discription Table of contents 0. This competition aims to solve the single cell image classification challenge that will help us to characterize single cell heterogeneity in the large collection of images by generating more accurate annotations of the subcellular localizations for thousands of human proteins in individual cells. 11253 Discussion https www. Each file represents a different filter on the subcellular protein patterns represented by the sample. At this stage the chromatin of the cell is condensed as visible by intense DAPI staining. What is weak image level labels The labels you will get for training are image level labels while the task is to predict cell level labels. Observations We see Nucleoplasm has most occurence around 8797. 3 Label Wise Cell Segmentation Table of contents 0. Introduction Table of contents 0. 4 Label Wise Single Cell Segmentation Table of contents 0. Import Packages 2 3. I am going to plot the images and mask for each label present in the dataset. 1 Welcome to Human Protein Atlas Single Cell Classification competiton hosted by Human Protein Atlas https www. There are 19 labels organelle present in the dataset 18 labels for specific locations and 1 label for negative and unspecific signal. version 19 Added visualization for single cell mask. com c open images 2019 instance segmentation overview evaluation. There are total 19 labels classes. They are usually located close to the edges of the cells. 10 samples have 3 labels. 1 Preprocessing Labels Table of contents 0. edu sites default files complete_14. png 000a6c98 bb9b 11e8 b2b9 ac1f6b6435d0_red. All samples consist of four files blue green red and yellow. The labels are represented as integers that map to the following 0. What is Human Protein Atlas The Human Protein Atlas is an initiative based in Sweden that is aimed at mapping proteins in all human cells tissues and organs. The sample submission will look something like ImageID ImageWidth ImageHeight PredictionString ImageAID ImageAWidth ImageAHeight LabelA1 ConfidenceA1 EncodedMaskA1 LabelA2 ConfidenceA2 EncodedMaskA2. Red for Microtubule channels. Label This represents the labels assigned to each sample. Examples of organelles with a vesicle annotation are the members of the endolysosomal pathway transport vesicles peroxisomes and lipid droplets. It consists of several stacks of flattened cisternae and tubular connections forming a ribbon like structure that is highly dynamic. com OFRIN PuzzleCAM Paper https arxiv. Mitochondria are enclosed by a double membrane with the inner membrane folded into characteristic cristae. They can be seen as a more or less distinct staining of a small area at the origin of the microtubules close to the nucleus. As mentioned in the data https www. device Inform Torch which device to put the model on. csv filenames and image level labels for the training set. Our task is to segment and label the images in this folder. net Papers 21PAMI_InsImgDatasetWSIS. com thedrcat hpa single cell classification eda mAP https www. Blue for Nuclei channels. It is almost always possible to detect the center from which they all originate the centrosome. com allunia protein atlas exploration and baseline https www. org Proceedings 2019 0430. csv the test set filenames and a guide for constructing a working submission. Example 000a6c98 bb9b 11e8 b2b9 ac1f6b6435d0_blue. Plasma membrane The plasma membrane or cell membrane consists of a lipid bilayer which separates the interior of the cell from the exterior. This labels are the organelles. It is the pattern s in the green channel that we should classify. Version Notes Table of contents 0. Evaluation Metric Mean Average Precision mAP Table of contents 0. Green for Protein of interest. Nuclear membrane The nuclear membrane appears as a thin circle around the nucleus. Thanks to Kishan Joshi https www. So this is segmentation classification problem. Intermediate filaments may extend through the whole cytosol or be concentrated in an area close to the nucleus. 1 Nucleoplasm Nucleoplasm is a type of protoplasm that is composed of thick fluid and constitutes chromatin fibres made up of DNA and usually found in the nucleus of the cells. Plasma is the 3 most label with 3111 occurences followed by Cytosol with 5685. Aggresome formation is a regulated process that occurs in response to overload of the protein folding and degradation systems due to cellular stress or disease. Version Notes 0 1. And yes as you might have guessed this overlaps the staining in the red channel. For HPA Cell images a value of 0. Each file represents a different filter on the subcellular protein patterns represented by the sample ID. Microtubules are seen as thin strands that stretch throughout the whole cell. 2 Test Submission Data Table of contents 0. This is not required but can make segmentations especially cell segmentations more accurate. multi_channel_model If True use the pretrained three channel version of the model. Weakly Supervised Multi Label Learning via Label Enhancement. Paper http mftp. com c hpa single cell image classification discussion 214518 8. Endoplasmic reticulum The endoplasmic reticulum ER is a delicate membranous network composed of sheets and tubules that spread throughout the cytoplasm and are contiguous with the nuclear membrane. Observations We have following features in train. Microtubules Microtubules are one of three principal components of the cytoskeleton. Following Substructures fall in this class such as Vesicles Peroxisomes Endosomes Lysosomes Lipid droplets Negative This class include negative stainings and unspecific patterns. Vesicles and punctate cytosolic patterns Vesicles is a collective term for cytoplasmic organelles that are often too small to have distinct features when imaged by light microscopy. As the training labels are a collective label for all the cells in an image it means that each labeled pattern can be seen in the image but not necessarily that each cell within the image expresses the pattern. 1 Let us have a look at competiton data directory. Useful Resources Table of cotents 0. Version 25 Added Useful Resources section. Negative are least only 34 samples with unspecified location. Nucleoli fibrillar center Nucleoli fibrillary center can appear as a spotty cluster or as a single bigger spot in the nucleolus depending on the cell type. Nuclear bodies Nuclear bodies is a collective term for a number of non membrane bound nuclear sub compartments. ImageBID ImageBWidth ImageAHeight LabelB1 ConfidenceB1 EncodedMaskB1 LabelB2 ConfidenceB2 EncodedMaskB2 What exactly is PredictionString column in submission. The Previous Human Protein Atlas Competition Discussion https www. Actin filaments Actin filaments can be seen as long and rather straight bundles of filaments or as branched networks of thinner filaments. train train set image directory which consists of sample images for training. Actin filaments 10. Paper https www. 1 Label Preprocessing 5. The format should be filename_filtercolor. Nucleoli The nucleoli are non membrane enclosed highly conserved sub organelles within the nucleus. 1 In this section we will develop intuition for data we are working with. Mitochondria Mitochondria generate the energy that is needed to power the functions of the cell but also participate directly in several other cellular processes including apoptosis cell cycle control and calcium homeostasis. Protein localization patterns Explained notebook https www. If the weights do not exist at the path they will be downloaded to it. Mitotic spindle The mitotic spindle can be seen as an intricate structure of microtubules radiating from each of the centrosomes at opposite ends of a dividing cell mitosis. We will use the HPACellSegmentation model to segment the cells in images. The labels only apply to the cells where green is present This is a weakly supervised multi label classification problem. This imprecise labeling is what we refer to as weak. csv ID The base filename of the sample. Human Protein Atlas Single Cell Classification Find individual human cell differences in microscope images Table of contents 1. Version 23 Added Mean Average Precision mAP explanation video in Inroduction section. Intermediate filaments Intermediate filaments often exhibit a slightly tangled structure with strands crossing every so often. 1 Each sample consists of four image files. com c hpa single cell image classification discussion 222094 Approach https www. Having this set to True gives you better cell segmentations but requires you to give the model endoplasmic reticulum images as part of the cell segmentation. 1 In this section we will look at each cell closely on the basis of labels. It is not perfectly smooth and sometimes it is also possible to see the folds of the membrane as small circles or dots inside the nucleus. ", "id": "wangsihui/human-protein-atlas-cell-segmentation-eda", "size": "20373", "language": "python", "html_url": "https://www.kaggle.com/code/wangsihui/human-protein-atlas-cell-segmentation-eda", "git_url": "https://www.kaggle.com/code/wangsihui/human-protein-atlas-cell-segmentation-eda", "script": "segmentCell plot_single_cell glob hpacellseg.cellsegmentator binary_mask label_cell seaborn numpy label_nuclei hpacellseg.utils matplotlib.pyplot tqdm.notebook pandas plot_all tqdm plot_cell_segments read_sample_image read_sample_image_seg IPython.display HTML ", "entities": "(('Colors', 'interest'), 'be') (('semi fluid that', 'nuclear various organelles'), 'Cytosol') (('such it', 'detection associated score Confidence cell'), 'need') (('Competition DataWe', 'files train'), 'provide') (('When cell', 'mitotic spindle'), 'move') (('we', 'image'), 'mean') (('file', 'sample ID'), 'represent') (('Negative', 'least only 34 unspecified location'), 'be') (('com cell image classification c hpa single discussion', 'label class rename column'), 'read') (('Having', 'cell segmentation'), 'give') (('we', 'labels multiple labels'), 'be') (('we', 'that'), 'be') (('they', 'cytosolic category'), 'be') (('fluid', 'complex molecules'), 'contain') (('some', 'interest'), 'be') (('membrane', 'together different domains'), 'compose') (('that', 'apoptosis cell cycle control'), 'generate') (('mitotic spindle', 'cell dividing mitosis'), 'spindle') (('Intermediate filaments', 'close nucleus'), 'extend') (('we', 'data'), '1') (('Human Protein Atlas Single Cell Classification', 'contents'), 'find') (('regulated that', 'cellular stress'), 'be') (('True', 'neural networks'), 'pad') (('Actin Actin filaments', 'thinner filaments'), 'filament') (('you', 'segmented cells'), 'need') (('We', 'image'), 'provide') (('Mitochondria', 'characteristic cristae'), 'enclose') (('that', 'cytosol'), 'be') (('Mitochondria', 'most human cells'), 'be') (('that', 'individual cells'), 'aim') (('sample', 'image four files'), 'consist') (('Golgi Golgi apparatus', 'endosomal secretory pathways'), 'apparatus') (('we', 'what'), 'be') (('that', 'whole cell'), 'see') (('True', 'model'), 'multi_channel_model') (('which', 'orgenelles'), 'want') (('that', 'cells human tissues'), 'be') (('proteins', 'cell'), '1') (('Plasma', '5685'), 'be') (('speckles Nuclear Nuclear speckles', 'nucleoplasm'), 'organize') (('They', 'cell as well usually more nuclear speckles'), 'vary') (('We', 'images'), 'use') (('file', 'sample'), 'represent') (('us', 'competiton data directory'), '1') (('that', 'nuclear membrane'), 'reticulum') (('necessarily cell', 'pattern'), 'mean') (('First we', 'appropriate label'), 'need') (('Weakly', 'Label Enhancement'), 'supervise') (('Very small number', 'more than 3 labels'), 'seem') (('so we', 'present'), 'be') (('This', 'cell model weights'), 'cell_model') (('they', 'centrosome'), 'be') (('only 1 label', 'image'), 'have') (('This', 'only cells'), 'apply') (('chromatin', 'DAPI visible intense staining'), 'condense') (('They', 'cells'), 'locate') (('Intermediate filaments', 'strands crossing'), 'exhibit') (('Microtubules Microtubules', 'cytoskeleton'), 'be') (('class', 'negative stainings'), 'fall') (('we', 'labels'), '1') (('Nuclear bodies', 'sub non membrane bound nuclear compartments'), 'be') (('prediciting location where protein', 'single cell'), 'be') (('that', 'following 0'), 'represent') (('Most labels', 'less 2000'), 'seem') (('Nucleoplasm', '8797'), 'see') (('we', 'multiple labels'), 'mean') (('negative pattern', 'staining unspecific'), 'mean') (('training image level labels', 'train'), 'provide') (('sample submission', 'ImageWidth ImageHeight ImageID PredictionString'), 'look') (('Examples', 'pathway transport vesicles endolysosomal peroxisomes'), 'be') (('Protein localization patterns', 'notebook https www'), 'Explained') (('samples', 'four files'), 'consist') (('sample', 'multiple label'), 'section') (('label class', 'them'), '1') (('which', 'exterior'), 'membrane') (('other filters', 'references'), 'use') (('task', 'folder'), 'be') (('which', 'training'), 'set') (('Valid values', 'cuda pointed cuda'), 'be') (('perfectly sometimes it', 'nucleus'), 'be') (('Nucleoli fibrillar center Nucleoli fibrillary center', 'cell type'), 'appear') (('We', 'cell segmentations'), 'post') (('that', 'when light microscopy'), 'be') (('non membrane', 'nucleus'), 'Nucleoli') (('prediction task', 'images'), 'be') (('They', 'microtubule red channel'), 'appear') (('I', 'present dataset'), 'go') (('we', 'HPA Cell Segmentation https github'), '1') (('they', 'it'), 'download') (('you', 'red channel'), 'yes') (('that', 'structure'), 'consist') (('They', 'close nucleus'), 'see') (('that', 'cells'), 'be') (('we', 'image'), 'csv') (('nuclei_model This', 'nuclei model weights'), 'take') (('them', 'human body'), 'be') (('Nuclear nuclear membrane', 'nucleus'), 'membrane') (('This', 'sample'), 'Label') (('we', 'contents'), 'predicite') (('Centrosome class', 'centrosomes'), 'include') (('how much images', 'models'), 'determine') (('image level task', 'cell level labels'), 'label') (('PredictionString exactly column', 'submission'), 'ImageBID') (('We', 'precise labels'), 'have') (('We', 'train'), 'follow') (('Weakly supervised Multi', 'Image Classification'), 'label') ", "extra": "['annotation', 'disease', 'test']", "label": "Perfect_files", "potential_description_queries": ["annotation", "appear", "apply", "area", "assign", "associated", "baseline", "basic", "become", "binarize", "category", "cell", "center", "challenge", "channel", "check", "circle", "classification", "close", "cluster", "collection", "column", "competition", "confidence", "contain", "control", "csv", "cuda", "cycle", "cytoplasm", "cytosol", "data", "database", "dataset", "default", "detect", "detection", "develop", "device", "directly", "directory", "double", "download", "eda", "embedding", "encoding", "energy", "evaluation", "every", "explore", "extend", "file", "filename", "filter", "following", "form", "format", "found", "generate", "generated", "graph", "green", "help", "hpacellseg", "http", "hub", "human", "image", "include", "including", "individual", "inner", "instance", "interest", "intersection", "intuition", "label", "labeled", "labeling", "least", "level", "light", "list", "look", "majority", "map", "mapping", "mask", "match", "matching", "matrix", "method", "metric", "microscope", "might", "mixture", "model", "most", "move", "multiple", "my", "need", "negative", "network", "neural", "no", "non", "not", "notebook", "nuclei", "number", "open", "out", "overview", "padding", "part", "partial", "path", "pattern", "pdf", "per", "plot", "png", "post", "power", "predict", "prediction", "present", "pretrained", "principal", "protein", "public", "read", "response", "sample", "sample_submission", "scaled", "score", "section", "segment", "segmentation", "semi", "set", "several", "shape", "similar", "single", "size", "smooth", "something", "space", "spread", "stage", "staining", "string", "structure", "sub", "submission", "supervised", "system", "table", "task", "term", "test", "those", "through", "tool", "total", "train", "training", "type", "under", "understanding", "up", "value", "version", "video", "visit", "visualization", "visualize", "while", "world"], "potential_description_queries_len": 182, "potential_script_queries": ["glob", "numpy", "seaborn", "tqdm"], "potential_script_queries_len": 4, "potential_entities_queries": ["cell", "classification", "data", "image", "light", "multiple", "score", "supervised"], "potential_entities_queries_len": 8, "potential_extra_queries": [], "potential_extra_queries_len": 0, "all_components_potential_queries_len": 186}