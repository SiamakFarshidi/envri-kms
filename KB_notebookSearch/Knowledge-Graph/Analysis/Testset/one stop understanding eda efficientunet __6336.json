{"name": "one stop understanding eda efficientunet ", "full_name": " h1 HuBMAP Hacking the Kidney h3 Let s understand the problem statement first h3 Domain Knowledge h4 1 What is Glomerulus h4 2 PAS Periodic acid Schiff Stain Microscopy h4 3 FTU Functional Tissue Unit h3 Let s understand the DATA now h4 TIFF File Format h4 RLE h3 Evaluation Metric h4 Dice Coefficient h4 Jaccard Score h4 Relation between Dice Coefficient and Jaccard Score h4 J D 2 D h3 Let s do the EDA now h4 File Structure h3 Training Image Analysis h4 Width and Height Distribution h4 Image Utilitity Functions h3 Training Images With Glomerulis h3 Glomerulis h4 Basic Statistics h4 Glomerulis Per Image h4 Glomeruli Width Height and Area Distribution h4 Glomerulis by Size h4 Five Smallest Glomerulis h4 Five Largest Glomerulis h3 SUB EffUNet5 TPU EfficientUNet 512x512 h3 References ", "stargazers_count": 0, "forks_count": 0, "description": "csv files shows the format of the submissions files consisting of the test image id and an rle encoded masks. Sample_Submission. Training Image AnalysisWidth and Height DistributionThe training images do not have consistent dimensions. What is Glomerulus First we understand what Nephron is. Paitient Data HuBMAP 20 dataset_information. com kwk100 hubmap exploratory data analysis edahttps www. The resulting aldehydes react with the Schiff reagent to produce the purple magenta color exhibited by these images. The annotations denote segmentations of glomeruli. FTU Functional Tissue Unit FTU or functional tissue unit is a three dimensional maximally connected block of cells centered around a capillary such that each cell in this block is within diffusion distance from any other cell in the same block. The training set has 8 files. Utility Functions Processing Directory Contents Training Images Test Images Train CSV The masks indicating a glomeruli FTUs are stored in rle format in the train. csv is in Running Length Encoding format. The train set includes annotations in both RLE encoded RLE is explained later in the notebook and unencoded JSON forms. For this we have to train a segmentation model that takes PAS kidney image input and identify the segments of glomeruli FTU in the PAS stained microscopy data. It is composed of a renal corpuscle and a renal tubule. This will help to improve the existing algorithms used to detect functional tissue units FTUs across different tissue preparation pipelines. The private test set is larger than the public test set. So to specify 10 pixels starting from pixel number 200 would be written as 200 10Evaluation MetricDice CoefficientDice coefficient is a statistical tool which measures the similarity between two sets of data. The size of the images varies greatly as well. csv The sample_submission. The renal corpuscle consists of a tuft of capillaries called a glomerulus and an encompassing Bowman s capsule. expand_dims mask 1 Plot full image Plot glomeruli images PUBLIC_TFREC use created tfrecords for public test set with MIN_OVERLAP 300 tiling 1024 512 ignore other private test data FULL do not use tfrecords just full submission compute mask sum for each image METRICS True False whether to run prediction when committing. The nephron is the microscopic structural and functional unit of the kidney. Both training and public test sets include anatomical structure segmentations. It s a measure of similarity for the two sets of data with a range from 0 to 100. ndim 2 mask np. RLEThe masks provided in the train. This encoding comes in pairs of pixel values as follows 1. WILL RUN predictions during submission in any case len folds_to_predict. Number of pixels from the starting pixel. JSON files are structured as follows A type Feature and object type id PathAnnotationObject. Although it s easy to interpret it is extremely sensitive to small samples sizes and may give erroneous results especially with very small samples or data sets with missing observations. This index has become arguably the most broadly used tool in the validation of image segmentation algorithms created with AI but it is a much more general concept which can be applied sets of data for a variety of applications including NLP. This has to be corrected when loading the images. PAS Periodic acid Schiff Stain MicroscopyPAS is a histology stain that detects complex sugars in tissue sections. The formula to find the Index is Jaccard Index the number in both sets the number in either set 100Relation between Dice Coefficient and Jaccard ScoreJ D 2 DLet s do the EDA now File StructureThe files in the root of the dataset are shown below. com roydatascience hubmap sub effunet5 tpu efficientunet 512x512 Libraries Number of glomeruli to display for each image Number of glomberuli to save as tiff files. The IsLocked field is the same across file types locked in glomerulus unlocked for anatomical structure and is not signal bearing. Referenceshttps www. The higher the percentage the more similar the two populations. They have on of the following shapes height width channel channel height width 1 1 channel height width Image Utilitity FunctionsTraining Images With GlomerulisGlomerulisBasic StatisticsGlomerulis Per ImageGlomeruli Width Height and Area DistributionGlomerulis by SizeFive Smallest GlomerulisFive Largest GlomerulisSUB EffUNet5 TPU EfficientUNet 512x512In the code below I will try to use TPU EfficientUNet 512x512 with freeze pretrained SUB EffUNet5. I suppose there will be 7 files. Glomerulus a cluster of nerve endings spores or small blood vessels in particular a cluster of capillaries around the end of a kidney tubule where waste products are filtered from the blood. The Dice coefficient can be used to compare the pixel wise agreement between a predicted segmentation and its corresponding ground truth. csv contains additional information about each image such as image size and anonymized patient data. Periodic acid is used to break specific bonds within these sugars. Glomeruli can be observed as the circular areas of dark stain. The public test set has 5 files. A geometry containing a Polygon with coordinates for the feature s enclosing volume Additional properties including the name and color of the feature in the image. TIFF is a flexible adaptable file format for handling images and data within a single file by including the header tags size definition image data arrangement applied image compression defining the image s geometry. I believe I used some terminologies that are confusing. In short each nephron in your kidneys has a microscopic filter called a glomerulus that is constantly filtering your blood. For this task we are given historical images of kidney and annotation information representing the glomerular segmentation. Jaccard ScoreThe Jaccard similarity index sometimes called the Jaccard similarity coefficient compares members for two sets to see which members are shared and which are distinct. So lets understand these terms and get some Domain Knowledge. HuBMAP Hacking the KidneyLet s understand the problem statement firstThe aim of this competition is to develop a segmentation problem to identify Glomerulus in the kidney. Let s understand the DATA now The Dataset is comprised of very large TIFF files TIFF is described later in the notebook. Note that these fields are the same between all files and do not offer signal. TIFF File FormatTag Image File Format abbreviated TIFF or TIF is a computer file format for storing raster graphics images popular among graphic artists the publishing industry and photographers. I suppose this can be used for pretraining. csv for each training image id. The dataset consists of 2 directories that contain training and test images and 3 csv files with additional information about the images. ", "id": "vera666/one-stop-understanding-eda-efficientunet", "size": "6336", "language": "python", "html_url": "https://www.kaggle.com/code/vera666/one-stop-understanding-eda-efficientunet", "git_url": "https://www.kaggle.com/code/vera666/one-stop-understanding-eda-efficientunet", "script": "read_mask make_grid load_dataset overlay_image_mask_original rle_to_image read_image rle_encode_less_memory plot_glom overlay_image_mask get_image_id numpy rasterio.windows read_image_mask matplotlib.pyplot tqdm.notebook tensorflow pandas tqdm Window global_shift_mask get_particles analyze_image get_tile get_dataset efficientnet _parse_image ", "entities": "(('image Number', 'tiff files'), 'sub') (('Dice coefficient', 'predicted segmentation'), 'use') (('It', 'renal corpuscle'), 'compose') (('It', '100'), 's') (('JSON files', 'type Feature'), 'structure') (('waste where products', 'blood'), 'Glomerulus') (('File StructureThe now files', 'dataset'), 'set') (('that', 'terminologies'), 'believe') (('fields', 'signal'), 'note') (('this', 'pretraining'), 'suppose') (('histology that', 'tissue sections'), 'be') (('Glomeruli', 'dark stain'), 'observe') (('annotations', 'glomeruli'), 'denote') (('such cell', 'same block'), 'be') (('freeze', 'SUB'), 'have') (('Periodic acid', 'sugars'), 'use') (('statistical which', 'data'), 'be') (('renal corpuscle', 'capillaries'), 'consist') (('much more general which', 'NLP'), 'become') (('test private set', 'test public set'), 'be') (('it', 'data missing observations'), 'be') (('firstThe aim', 'kidney'), 'hack') (('This', 'tissue preparation different pipelines'), 'help') (('size', 'images'), 'vary') (('com kwk100 hubmap exploratory data analysis', 'www'), 'edahttps') (('Training Image AnalysisWidth', 'Height training consistent dimensions'), 'have') (('FTUs', 'train'), 'Functions') (('training', 'test structure public anatomical segmentations'), 'include') (('csv', 'image such size'), 'contain') (('we', 'glomerular segmentation'), 'give') (('nephron', 'microscopic structural kidney'), 'be') (('header tags size definition image data arrangement', 'geometry'), 'be') (('which', 'two sets'), 'call') (('that', 'images'), 'consist') (('So lets', 'Domain Knowledge'), 'understand') (('test data 300 1024 512 other private FULL', 'prediction'), 'PUBLIC_TFREC') (('that', 'microscopy data'), 'have') (('train set', 'JSON forms'), 'include') (('resulting aldehydes', 'images'), 'react') (('This', 'when images'), 'have') (('csv', 'Running Length Encoding format'), 'be') (('that', 'constantly blood'), 'have') (('encoding', '1'), 'come') (('TIFF', 'later notebook'), 'let') (('TIFF File FormatTag Image File Format', 'publishing industry'), 'abbreviate') (('IsLocked field', 'anatomical structure'), 'be') (('i rle', 'masks'), 'show') ", "extra": "['annotation', 'biopsy of the greater curvature', 'patient', 'test']", "label": "Perfect_files", "potential_description_queries": ["annotation", "become", "block", "blood", "case", "cell", "channel", "circular", "cluster", "code", "coefficient", "color", "compare", "competition", "compute", "computer", "concept", "contain", "csv", "data", "dataset", "detect", "develop", "display", "distance", "encoding", "end", "explained", "feature", "field", "file", "filter", "filtered", "find", "following", "format", "formula", "functional", "general", "geometry", "glomeruli", "ground", "header", "height", "help", "id", "ignore", "image", "improve", "include", "including", "index", "industry", "input", "kidney", "len", "mask", "measure", "missing", "model", "most", "name", "not", "notebook", "number", "object", "patient", "percentage", "pixel", "prediction", "pretrained", "problem", "public", "range", "rle", "run", "save", "segmentation", "set", "short", "signal", "similar", "similarity", "single", "size", "stain", "structure", "sub", "submission", "sum", "task", "test", "tiff", "tissue", "tool", "train", "training", "try", "type", "unit", "validation", "volume", "width", "wise"], "potential_description_queries_len": 104, "potential_script_queries": ["efficientnet", "numpy", "tensorflow", "tqdm"], "potential_script_queries_len": 4, "potential_entities_queries": ["general", "missing", "size", "training"], "potential_entities_queries_len": 4, "potential_extra_queries": ["biopsy"], "potential_extra_queries_len": 1, "all_components_potential_queries_len": 109}