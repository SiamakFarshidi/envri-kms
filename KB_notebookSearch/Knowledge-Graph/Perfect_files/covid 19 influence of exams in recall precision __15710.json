{"name": "covid 19 influence of exams in recall precision ", "full_name": " h1 Taskforce to help diagnose COVID19 h2 Introduction h2 Data prep h3 Import h3 EDA h2 Modelling strategy h2 Prediction of confirmed COVID19 h3 Regular blood Tests h4 Baseline Dummy classifiers h4 SVM h4 Gradient Boosting Classifier h4 Random Forest h4 AdaBoost on Decision Trees h3 Respiratory virus and bacteria Tests h4 Baseline Dummy classifiers h4 SVM h4 Gradient Boosting Classifier h4 Random Forest h4 AdaBoost on Decision Trees h3 Influenza Rapid Tests h4 Baseline Dummy classifiers h4 SVM h4 Gradient Boosting Classifier h4 Random Forest h4 AdaBoost on Decision Trees h2 Final thoughts on results h2 Acknowledgment h2 Refer\u00eancias ", "stargazers_count": 0, "forks_count": 0, "description": "The first plot in the figure below illustrate it Figure 1 a. Given the high dispersion of patients undergoing each test we also analysed the null values in the dataset. Backtest agains H1N1 Rhinovirus and Influenza B We selected SARS CoV 2 negative patients diagnosed with H1N1 Rhinovirus and Influenza B to backtest our best performing models agains other diseases with similar symptoms. We stratified the sets by SARS Cov2 exam result and admission type unit. Some models do not accept null values. 6 groups of tests were found using Principal Components Analysis. com in christianespinoz Computer Scientist from University of S\u00e3o Caetano do Sul Brazil and improver data analyst at Hospital Israelita Albert Einstein. One curious case was the Random Forest algorithm that reached a 65 F1 Score on test but greatly deviated from validation results 55 so we invalidated the model. Now we notice that most of the patients didn t underwent tests other then for COVID in the sample. Th AdaBoost most important features are C reactive protein Neutrophils Mean platelet volume monocytes and Red blood cell distribution width RDW. In contrast Gradient Boost have high accuracy on all tests the lowest performance on H1N1 with 93. Below we present the data. net clinical archive assessment skills why do we test for urea and electrolytes 24 01 2014 4. 3 of them are Regular blood test respiratory virus and bacterial tests and Influenza rapid tests. Leukocytes Lymphocytes Basophils Eosinophils Neutrophils Platelets Monocytes Mean platelet volume C Reactive ProteinAll models tested greatly improved over the baseline based on F1 Scores measures. Comparing admission units admitted patients underwent significantly more exams then elective ones. The models fitted to this subset of tests barely outperformed the baseline. The result above can be helpful to fit partial models on chunks of exams available since we observed that some of them occur together. We also showed that the blood tests are the only relevant exams found to greatly outperform a dummy baseline in predicting coranavirus. Testing positive or not apparently doesn t help on diagnosing coronavirus. Nardocci Paula Gullo Caio Eduardo Lobo Suzana Margareth. php script sci_arttext pid S0103 507X2013000200010 lng en. Available from http www. Available at https slideplayer. We also treated Ausentes as 0 and any other kind of crystal as 1 on Urine Crystals because we believe that this is more intuitive for interpretation. Investigatint the feature importances of this random forest we ve found that 48 of the model was explained by patient age which is far from reasonable. Discussion of results1. The aggregation of white points in the image illustrates the final result of PCA. We identified some possible bias in the data that must be taking into account when modelling it specially that some tests are performed mostly on severe cases. Baseline Dummy classifiersSince this dataset is imbalanced dummy classifiers get high accuracy but low F1 Score 0. com slide 4382692 Encode the addmission columns into one Conversion from categorical to numerical Removal of exams not performed on positive cases Frequency plot Admission units over total tests performed Percentage of COVID cases over total tests performed plot lines plot cols Here we create columns to flag the group of tests performed Data split and hyperparameter search Influenza B Plot the feature importances of the forest Print the feature ranking Influenza B. Influenza Rhinovirus 2. We also performed an analysis on the co occurences of the aforementioned groups of tests by COVID status positive or negative and admission unit ICU etc. We also created a group containing the influenza rapid tests these exams are not present in the PC analysis because don t co occur with others but are relatively commom in the dataset. The last one represents the variation in volume of the red blood cells and usually indicate other underlying conditions 4. Regular blood test red and white cells 3. From Figure 3 we observe that after the 6th component the variance explained grows very slowly. Backtest against Influenza B 1. On Figure 4 we plot the most important features of the first 6 principal components variance explained by these PCs 94. Respiratory viruses test e. Same interpretation of 3 medical expertise would help 5. SVM Gradient Boosting Classifier Random Forest AdaBoost on Decision Trees Final thoughts on resultsThe Gradient Boosting Classifier is the best alternative we ve got for high precision needs. Inputation in the medical context is hard and must consider demographic characteristics like gender race etc. com in jairofreitas Computer Scientist from Federal University of ABC Brazil and data analytst at Ita\u00fa Unibanco Fortune 500 NYSE and B3 ITUB Christian Espinoza https www. Unfortunately he didn t report the interpretation of the pattern in the data so we will do it by performing dimensionality reduction on the presence or absence of exams. Most of the dataset is missing values2. We ve found that the AdaBoost metalearning model over Decision Trees had the best recall on the positive COVID cases 82 and a decent precision 42. intensiva Internet. EDAWe first analyze the frequency of each test in the dataset. We merged PCs 3 and 4. Figure 6 illustrate the usual infection kinectics with respect to some white blood cells. We also were capable of spliting the dataset into 6 groups of frequently co occuring medical exams in a unsupervised manner which allowed for greater samples on training less dropping of records due to null values. The accuracy is also reported since it s more intuitive to a new entrant in data science. Later we interpret these PCs. Training validation and test datasets Once selected the patients that underwent a group of tests we split the dataset in training 70 and test 30. These result u We selected some patients diagnosed with other flus to backtest our models. They are usually very low frequency tests. Red Cell Distribution Width RDW Test. Cell Injury Death Inflammation and Repair. The result is shown in Figure 6. Usually rarest tests are related to increased complexity of the medical facility. We ve found that infected patients have done slightly more non respiratory tests then COVID negative people. Evaluation metrics We evaluated all of our models using F1 Score the harmonic mean of precision and recall given that the dataset is very unbalanced. On Figure 5 we plot the frequency of these exams. We use 5 fold cross validation on training. SVM Gradient Boosting ClassifierGradient Boosting discussion uses the table below Backtest against Influenza B Backtest against H1N1 Backtest against Rhinovirus Random Forest AdaBoost on Decision Trees The plot below is used in the discussion of AdaBoost results. Backtest against H1N1 1. For these we fit models and compare the ones that favors precision and recall through a clinical perspective. All results are compared against a dummy classifier. Backtest against Influenza B Backtest against H1N1 Backtest against Rhinovirus Respiratory virus and bacteria TestsThis group of tests is composed of the patient age quantile and 17 tests on common virus and bacterias that affect the respiratory system such as H1N1 and influenza. The unbalanaced nature of the data was explored and taken into account when evaluating the model performances. The occurence of each group of tests and the co occurrence between them is highly dependent on the severity of the case especially admitted versus non admitted patients. On the other hand AdaBoost recall is higher because it s more sensitive to elements that show up early in an infection process C reactive protein 5 and neutrophils 6. The question we want to answer is Are we actually detecting a SARS CoV 2 pattern or just a commom infectious process related to other diseases with similar symptoms Figure 8 presents the quantity of patients without SARS CoV 2 but diagnosed with 1 or more respiratory diseases. Figure 2 is based on Nasser Boan s kernel 2. Gradient Boosting Classifier 1. Notice that 22 tests were not included in the 6 major groups proposed. As exemplified by the video below by Grant Sanderson adopting strategies to quickly isolate vectors of a disease is the most effective non pharmacological strategy. Also we found on Figure 1 c that rarer tests are related to higher probability of the patient having coronavirus. Respiratory virus and bacteria Tests 1. Regular blood Tests 1. Medical expertise is needed to fully interpret this data. com dataset e626783d4672f182e7870b1bbe75fae66bdfb232289da0a61f08c2ceb01cab01 dataTeam members Jairo da Silva Freitas J\u00fanior https www. We also thanks SIG Ci\u00eancia de Dados Intelig\u00eancia Artificial em Sa\u00fade CIDIAS for the opportunity to present our work to a medical audience. com ossamum exploratory data analysis and feature importance2. Import and preparation 1. So we investigated Figure 1 b the representativeness of patient admission unit for each medical exam. We reordered Figure 2 rows and columns by the groups of exams. that are not provided in the dataset. The Gradient Boosting most important features were Leukocytes Monocytes Platelets C reactive protein mg dL and Red blood cell distribution width RDW. SVM Gradient Boosting Classifier Random ForestThe discussion on this result uses the feature importance table below. Severe virus influenza A H1N1 related pneumonia and community acquired pneumonia differences in the evolution. com health rdw blood test5. Coocurence matrix for test on COVID negative patients Coocurence matrix for test on COVID positive patients Coocurence matrix for test on UCI patients Coocurence matrix for test on semi intensive patients Coocurence matrix for test on regular ward patients Coocurence matrix for test on elective patients Modelling strategyThe exploratory analysis indicated that 1. Routine blood tests 1 why do we test for urea and electrolytes Nursing Times 110 5 19 21. The models fitted to it marginally outperformed the baseline. Available at https www. AdaBoost on Decision Trees 1. There s a high dispersion in the quantity of patients undergoing each test. The interpretation of the first six principal components are 1. Exploratory Data Analysis and Feature Importance. Figure 7 Infection kinetics and white blood cells a General 6 b C Reactive Protein 5 We ve also found that the AdaBoost model have high accuracy on H1N1 80 and Rhinovirus 94 patients but low accuracy on Influenza B ones 54. Taskforce to help diagnose COVID19Kaggle competition https www. IntroductionWe analyse feature bias through severity of cases. The tests can be splitted into two categories Red blood cells RBCs Tests on concentration and morphology of cells responsible to transport oxygen in the blood. This said we have chosen to create models for each group of tests in order to prevent bias toward severe cases and data imputation. Different from him we considered wordings like not_done and N\u00e3o Realizado as missing for further analysis of missing values. Prediction of confirmed COVID19 Regular blood TestsThis group of tests is composed of the patient age quantile and 16 common blood tests. We believe though that recall is preferred over precision given the efficacy of putting infected people in isolation. null_values_exploration logreg. AdaBoost on Decision Trees Influenza Rapid TestsThe influenza rapid tests group is composed of 2 tests A and B Influenza rapid tests and the patient age quantile. It has 6 groups of tests each group contains medical exams that usually occur together 3. The first four features usually present abnorbal values when the body passing through an immunological process. 2013 June 25 2 123 129. Our hypothesis is that Gradient Boosting give more importance to clearer signs of infection severity leukocytes. We also backtest our best models agains patients infected with H1N1 Rhinovirus and Influenza B and found that our models capture SARS CoV 2 patterns different than these flus. Billirubin enzymes electrolytes1 and gaseous analysis4. The accuracy of the models were tested against patients with 3 diseases which have similar symptoms to COVID 19 and the results suggested that they can differentiate SARS CoV 2 from H1N1 Rhinovirus and Influenza B. Unusual Bone marrow cells circulating in blood and segmented parts1 We found Blann article on Nursing Times 3 useful to feel comfortable deciding to allocate electrolytes on PC 3 other than 2 which is in accordance to the data. AcknowledgmentWe would like to thanks the team from Einstein Data4u for the competition and selection of our work as relevant to the theme. On the other hand Gradient Boosting Classifier got the best precision on the COVID cases 57 and a reasonable recall 49. Finally AdaBoost is our model of choice for isolation of suspicious cases since it has a very high recall. Acknowledgment Data prep ImportWe performed categorical to numerical conversion and removed tests that were not tested on infected patients. Regular blood tests were found to be the most useful to detect coronavirus. Backtest against Rhinovirus 1. Our work is organized as follows 1. Both data preparations are inspired by Ossamu s 1 EDA of this dataset. We also tested penalizing more the errors on the minority classes with Random Forest and SVM. Prediction of confirmed COVID19 1. com nazeboan null values exploration logreg 67 acc3. For that we used the standart implementation of PCA from Scikit learn. The values are on percentage of total records of the subset of patients. Milton Ossamu Tanizaka. Red blood cells Hemoglobin Hematocrit Red blood cell distribution width RDW Mean corpuscular hemoglobin MCH Mean corpuscular volume MCV Mean corpuscular hemoglobin concentration White blood cells WBCs Cells responsible for immunulogic body process such as fighting a disease and stanching a wound. ", "id": "jairofreitas/covid-19-influence-of-exams-in-recall-precision", "size": "15710", "language": "others", "html_url": "https://www.kaggle.com/code/jairofreitas/covid-19-influence-of-exams-in-recall-precision", "git_url": "https://www.kaggle.com/code/jairofreitas/covid-19-influence-of-exams-in-recall-precision", "script": "classification_report train_test_split keras.wrappers.scikit_learn IPython.display tensorflow.python.keras.layers tensorflow.python.keras accuracy_score numpy unit_room seaborn cooc_matrix f1_score Dense sklearn.dummy sklearn.tree GradientBoostingClassifier sklearn PCA matplotlib.pyplot KerasClassifier DecisionTreeClassifier Sequential svm sklearn.model_selection pandas RandomForestClassifier DummyClassifier HTML AdaBoostClassifier sklearn.decomposition GridSearchCV sklearn.metrics sklearn.ensemble ", "entities": "(('that', 'clinical perspective'), 'fit') (('Modelling strategyThe exploratory analysis', '1'), 'matrix') (('blood Regular tests', 'most coronavirus'), 'find') (('blood also tests', 'coranavirus'), 'show') (('Figure', '2 1 respiratory diseases'), 'be') (('they', 'H1N1 2 Rhinovirus'), 'test') (('first plot', 'it'), 'illustrate') (('also it', 'data science'), 'report') (('Influenza models', '2 patterns flus'), 'backtest') (('aggregation', 'PCA'), 'illustrate') (('6 groups', 'Principal Components Analysis'), 'find') (('we', 'severe cases'), 'say') (('which', 'data'), 'cell') (('we', 'exams'), 'report') (('1 rarer c tests', 'coronavirus'), 'find') (('we', '30'), 'select') (('AcknowledgmentWe', 'relevant theme'), 'like') (('occurence', 'especially non admitted patients'), 'be') (('that', 'infected patients'), 'perform') (('that', 'such H1N1'), 'backtest') (('So we', 'medical exam'), 'investigate') (('tests', 'blood'), 'splitte') (('Medical expertise', 'fully data'), 'need') (('EDAWe', 'dataset'), 'analyze') (('22 tests', '6 major groups'), 'notice') (('didn t underwent', 'sample'), 'notice') (('dataset', 'precision'), 'metric') (('that', 'medical exams'), 'have') (('variance', '6th component'), 'observe') (('Prediction', 'age patient quantile'), 'compose') (('models', 'barely baseline'), 'outperform') (('Same interpretation', '5'), 'help') (('SVM Gradient Classifier Random ForestThe discussion', 'feature importance table'), 'Boosting') (('so we', 'model'), 'be') (('recall', 'isolation'), 'believe') (('3', 'them'), 'be') (('interpretation', 'first six principal components'), 'be') (('We', 'exams'), 'reorder') (('values', 'patients'), 'be') (('Figure', 'blood white cells'), 'illustrate') (('which', 'patient age'), 'find') (('best recall', '82'), 'find') (('we', 'missing values'), 'consider') (('volume C Reactive ProteinAll Monocytes Mean platelet models', 'F1 Scores measures'), 'Platelets') (('best we', 'precision high needs'), 'be') (('patients', 'significantly more exams'), 'admit') (('Gradient Boosting', 'infection severity leukocytes'), 'be') (('some', 'them'), 'be') (('last one', 'usually other underlying conditions'), 'represent') (('We', 'medical audience'), 'thank') (('unbalanaced nature', 'model when performances'), 'explore') (('that', 'infection early process'), 'be') (('Gradient Boosting Classifier', 'COVID cases'), 'get') (('it', 'very high recall'), 'be') (('infected patients', 'then negative people'), 'find') (('which', 'null values'), 'be') (('IntroductionWe', 'cases'), 'analyse') (('adopting', 'disease'), 'be') (('Usually rarest tests', 'medical facility'), 'relate') (('influenza Severe virus A H1N1 related pneumonia', 'evolution'), 'acquire') (('this', 'more interpretation'), 'treat') (('We', 'models'), 'result') (('specially tests', 'mostly severe cases'), 'identify') (('dummy classifiers', 'high accuracy'), 'classifierssince') (('when body', 'immunological process'), 'present') (('don t co', 'relatively dataset'), 'create') (('models', 'marginally baseline'), 'outperform') (('we', 'Scikit'), 'use') (('5 we', 'exams'), 'plot') (('data preparations', 'dataset'), 'inspire') (('Figure', 'Nasser 2 Boan'), 'base') (('we', 'dataset'), 'analyse') (('assessment net clinical archive why we', '24 01 2014 4'), 'skill') (('We', 'training'), 'use') (('why we', 'Nursing Times'), 'test') (('4 we', 'PCs'), 'plot') (('We', 'SARS Cov2 exam result'), 'stratify') (('We', 'Random Forest'), 'test') (('Inputation', 'gender race etc'), 'be') (('SARS CoV 2 negative patients', 'similar symptoms'), 'again') (('plot', 'AdaBoost results'), 'use') (('results', 'dummy classifier'), 'compare') (('group', 'Influenza B.'), 'slide') (('AdaBoost also model', 'Influenza B 80 Rhinovirus 94 low ones'), 'cell') (('Influenza Rapid tests TestsThe influenza rapid group', '2 tests'), 'AdaBoost') (('We', 'COVID status'), 'perform') (('Gradient', 'most important features'), 'be') (('Gradient Boost', '93'), 'have') "}