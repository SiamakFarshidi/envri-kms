{"name": "prostate cancer panda insight eda ", "full_name": " h1 About this Notebook h1 Domain Knowledge h3 Q 1 What is Prostate h3 Q 2 Where is it located h3 Q 3 What is the job of Prostate h3 Q 4 What is Prostate Cancer h3 Q 5 Causes h3 Q 6 How is it Diagnosed h3 Q 7 What are the benefits and risks of screening h3 Q 8 So what is Prostat biopsy and how it is done h2 Q 9 What is GLEASON score h3 Q 11 So What is ISUP grade now h3 Q 11 How has the Gleason scores been generated in the dataset h1 Now let s deep dive into the Data h4 Let s see the training data h4 Now let s check the number of images types of data provider ISUP Grades and Gleason Scores h4 Let s check the ISUP Grdes of different Gleason Scores h4 Converting negative Gleason Score to 0 0 h4 Dropping the image having incorrect ISUP Score from the train set h3 Let s see the test Data h3 Now it s time for presenting our Data in a beautiful way which is often called EDA h2 Now let s check the Image h4 Displaying few images h4 Displaying an image with it s Zoomed version h4 Displaying multiple images with it s attributes like Data Provider Gleason Score and ISUP Grade h3 Visualizing masks using matplotlib h3 Displaying Images and it s Mask Side by Side h3 Overlaying masks on the slides h3 Exploring images with pen markers h4 Future Work ", "stargazers_count": 0, "forks_count": 0, "description": "Visualizing masks using matplotlib Apart from the slide level label present in the csv file almost all slides in the training set have an associated mask with additional label information. For example a man with a Gleason score 6 cancer might assume that his cancer is in the middle of the range of grades which in theory go from 2 to 10 even though grade 6 cancers are actually the lowest grade seen in practice. These masks directly indicate which parts of the tissue are healthy and which are cancerous. This blood test measures the level of PSA in the blood. IMAGE MASKS Create alpha mask Mapping 0 background 1 stroma 2 benign epithelium 3 Gleason 3 4 Gleason 4 5 Gleason 5 Mapping 0 background 1 benign 2 cancer. Examples of open source viewers that can open the PANDA dataset are ASAP and QuPath. ISUP Grade 0 and 1 are more provided by Karolinska ISUP Grade 3 4 5 are more provided by Radbound Isup 2 in training set has come almost equal from the both data provider Gleason Score 0 0 and 3 3 contiribute more to the Training dataset Now let s check the Image Displaying few imagesIn the following sections we will load data from the slides with OpenSlide. About 1 in 9 men will be diagnosed with prostate cancer in their lifetime. If you use Qupath and the images do not load try changing the file extension to. This is a standard way of staining the originally transparent tissue to produce some contrast. Tip Want to view the slides in a more interactive way Using a WSI viewer you can interactively view the slides. These markings are not part of the tissue but were made by the pathologists who originally checked this case. The scale of the Gleason score can be misleading for patients. This overlay can help you identifying the different growth patterns. For a prostate biopsy tiny pieces of tissue are removed from the prostate and looked at under a microscope. ASAP can also overlay the masks on top of the images using the Overlay functionality. The urethra is a tube that carries urine from the bladder out through the penis. Now let s explore the Diagnosis of this disease and come to our problem statetemt of how we can use Gleason Score. In Training set Biopsys are of more ISUP Grade 0 and ISUP Grade 1. Being fully aware of the problem statement will help you to build a better model. At the same time fluid from the prostate and the seminal vesicles also moves into the urethra. Note that slightly different procedures were in place for the images used in the test set than the training set. The information in the masks differ from the two centers Radboudumc Prostate glands are individually labelled. Each epithelial unit is separate and has a lumen. The prostate surrounds the urethra. There are noticable color differences between the biopsies this is very common within pathology and is caused by different laboratory procedures. It looks scary don t be scared watch this video Now once the tissue is collected and if cancer cells are found the pathologist will assign a Gleason Score which helps to determine the severity risk of the disease. When found early it can be treated early which helps stop or slow the spread of cancer. So till now we are we gained the knowledge about this disease. OpenSlide gives the resolution in centimeters so we convert this to microns. A Benign prostate glands with folded epithelium The cytoplasm is pale and the nuclei small and regular. This mixture of semen and fluid from the prostate and seminal vesicles forms the ejaculate that passes through the urethra and out of the penis. The glands are hollow structures which can be seen as white holes or branched cavities in the WSI. There are also some poorly formed small glands and some fused glands. This kernel will be a work in Progress and I will keep on updating it as the competition progresses and I learn more and more things about the data If you find this kernel useful Please consider Upvoting it it motivates me to write more Quality content Domain Knowledgelet s start with some basic questions that should come to everyones mind before getting your hands on dataset given for this Competition. Let s take a look on few of these images. Based on the Gleason score prostate cancers are often divided into 3 groups Cancers with a Gleason score of 6 or less may be called well differentiated or low grade. Prostate cancer cells can spread by breaking away from a prostate tumor. At this point image data is read from the file and loaded into memory. These 2 grades are added to yield the Gleason score also called the Gleason sum. After spreading cancer cells may attach to other tissues and grow to form new tumors causing damage where they land. For this exam the healthcare provider puts a lubricated gloved finger into the rectum. Displaying an image with it s Zoomed version Displaying multiple images with it s attributes like Data Provider Gleason Score and ISUP Grade Few Insights The image dimensions are quite large typically between 5. The samples are made up of glandular tissue and connective tissue. This rotation has no clinical value and is only dependent on how the biopsy was collected in the lab. The rise tells us that cancer may be present. epithelial sheets with multiple lumina. Or the test may be a false positive suggesting something is wrong when you are actually healthy. Since prostate cancers often have areas with different grades a grade is assigned to the 2 areas that make up most of the cancer. About this NotebookGetting the domain knowledge is the first thing we should do for any Kaggle Competition. B Prostatic adenocarcinoma Gleason Pattern 3 has no loss of glandular differentiation. There is an attempt to form lumina but the tumor fails to form complete well developed glands. PSA is a protein made only by the prostate and prostate cancers. Autopsy studies show 1 in 3 men over the age of 50 have some cancer cells in the prostate. Valid values are 0 background non tissue or unknown1 stroma connective tissue non epithelium tissue 2 healthy benign epithelium3 cancerous epithelium Gleason 3 4 cancerous epithelium Gleason 4 5 cancerous epithelium Gleason 5 Karolinska Regions are labelled. The label masks of Karolinska were semi autotomatically generated based on annotations by a pathologist. Q 7 What are the benefits and risks of screening The PSA test and DRE are very important tools. For example if the Gleason score is written as 3 4 7 it means most of the tumor is grade 3 and less is grade 4 and they are added for a Gleason score of 7. In theory the Gleason score can be between 2 and 10 but scores below 6 are rarely used. Biopsies can be in different rotations. Prostate cancer is the most serious cause of a high PSA result. The disease is metastatic prostate cancer not bone cancer. The prostate is about the size of a walnut and weighs about one ounce. Here in this notebook I will be sharing complete insight of Prostate Cancer it s detection and using this knowledge we will be doing EDA and will build a model. This microphotograph shows irregular cribriform cancer i. Because of this doctors have developed Grade Groups ranging from 1 most likely to grow and spread slowly to 5 most likely to grow and spread quickly Grade Group 1 Gleason 6 or less Grade Group 2 Gleason 3 4 7 Grade Group 3 Gleason 4 3 7 Grade Group 4 Gleason 8 Grade Group 5 Gleason 9 10Below is the video I should recommend you to watch for better understanding of GLEASON score Q 11 So What is ISUP grade now According to current guidelines by the International Society of Urological Pathology ISUP the Gleason scores are summarized into an ISUP grade on a scale from 1 to 5 according to the following rule Gleason score 6 ISUP grade 1 Gleason score 7 3 4 ISUP grade 2 Gleason score 7 4 3 ISUP grade 3 Gleason score 8 ISUP grade 4 Gleason score 9 10 ISUP grade 5 If there is no cancer in the sample we use the label ISUP grade 0 in this competition. Let s check the ISUP Grdes of different Gleason Scores Two things we see Here we see that negative and 0 0 Gleason Scores have some ISUP Grade which is 0. As with the slides itself the label masks can be opened using OpenSlide. The appearance of the glands forms the basis of the Gleason grading system. These pen markings are available on some slides in the training set. If the cancer looks very abnormal it is given a grade of 5. Gleason Pattern 5 may also contain solid sheets or strands of cancer cells. Also we see that Gleason Score 4 3 have two ISUP Grades which is 3 and 2. To know more about test submission folow this discussion https www. Dispersed single cancer cells are seen in the stroma. Q 2 Where is it located The prostate is below the bladder and in front of the rectum. Q 3 What is the job of Prostate The main job of the prostate and seminal vesicles is to make fluid to bathe semen. A false positive result may lead to a biopsy that isn t needed. Note In the example above you can also observe a few pen markings on the slide dark green smudges. Since we know that the correct ISUP Grade for Gleason Score is 3 we need to find the one which is labeled as Gleason Score as 2 and remove that. Grade GroupsIn recent years doctors have come to realize that the Gleason score might not always be the best way to describe the grade of the cancer for a couple of reasons Prostate cancer outcomes can be divided into more than just the 3 groups mentioned above. But the DRE by itself cannot detect early cancer. Another reason for a high PSA can be benign non cancer enlargement of the prostate. Some of the training set images have stray pen marks on them but the test set slides are free of pen marks. The benefit of OpenSlide is that we can load arbitrary regions of the slide without loading the whole image in memory. Prostatitis inflammation of the prostate can also cause high PSA results. Cancers with a Gleason score of 7 may be called moderately differentiated or intermediate grade. Valid values 0 background non tissue or unknown1 benign tissue stroma and epithelium combined 2 cancerous tissue stroma and epithelium combined The label masks of Radboudumc were semi automatically generated by several deep learning algorithms contain noise and can be considered as weakly supervised labels. Q 9 What is GLEASON score The Gleason system which has been in use for many years assigns grades based on how much the cancer looks like normal prostate tissue. For that reason it s treated as prostate cancer in bone. Learnt a lot from https www. So We need to merge these two. This is the only way to know for sure if you have prostate cancer. The label information is stored in the red R channel the other channels are set to zero and can be ignored. Even though there is no known reason for prostate cancer there are many risks associated with the disease like Age Ethnicity Family History Smoking Diet etc. Finally I would like to thank the authors of following kernels. A risk of a PSA test is that it may miss detecting cancer a false negative. For example men with a Gleason score 3 4 7 cancer tend to do better than those with a 4 3 7 cancer. The glands are grouped together. Q 5 Causes No one knows why or how prostate cancer starts. Although most often the Gleason score is based on the 2 areas that make up most of the cancer there are some exceptions when a biopsy sample has either a lot of high grade cancer or there are 3 grades including high grade cancer. When prostate cancer occurs it starts in the prostate gland and occasionally spreads to the seminal vesicles. The first number assigned is the grade that is most common in the tumor. And men with a Gleason score 8 cancer tend to do better than those with a Gleason score of 9 or 10. Cancers with Gleason scores of 8 to 10 may be called poorly differentiated or high grade. com rohitsingh9990 panda eda better visualization simple baseline https www. It is the second leading cause of cancer deaths for men in the U. Q 4 What is Prostate Cancer Prostate cancer is a form of cancer that develops in the prostate gland. A low PSA is a sign of prostate health. ZOOMED FUGURE UNZOOMED FIGURE Here we compute the pixel spacing the physical size of a pixel in the image. For example if prostate cancer spreads to the bones the cancer cells in the bones are actually prostate cancer cells. The glandular structure characteristic of healthy prostate tissue is progressively lost with increasing grade. Each slide has 3 levels you can load corresponding to a downsampling of 1 4 and 16. All microphotographs show hematoxylin and eosin stains at 20x lens magnification. Converting negative Gleason Score to 0 0 Dropping the image having incorrect ISUP Score from the train set Let s see the test DataThey are only 3 images in the test and they too are hidden and we have access to them only when we are submitting. Almost all cancers are grade 3 or higher grades 1 and 2 are not often used. Q 1 What is Prostate The prostate is a part of the male reproductive system. Q 6 How is it Diagnosed Screening Screening means testing for a disease even if you have no symptoms. A rapid rise in PSA may be a sign that something is wrong. D Prostatic adenocarcinoma Gleason Pattern 5 has an almost complete loss of glandular differentiation. com tanulsingh077 prostate cancer in depth understanding eda model https www. 000 pixels in both x and y. All of these are included in Gleason Pattern 4. Exploring images with pen markersIt is mentioned that in training dataset there are few images with pen markers on them. The man either bends over or lies curled on his side on a table. They can travel through blood vessels or lymph nodes to reach other parts of the body. The pathologist is the doctor who will look carefully at the tissue samples to look for cancer cells. com c prostate cancer grade assessment discussion 145219 Now it s time for presenting our Data in a beautiful way which is often called EDAKarolinska has provided more images than Radbond. Displaying Images and it s Mask Side by Side Overlaying masks on the slidesAs the masks have the same dimension as the slides we can overlay the masks on the tissue to directly see which areas are cancerous. The cytoplasm is often dark and the nuclei enlarged with dark chromatin and some prominent nucleoli. The test might also detect very slow growing cancer that will never cause problems if left untreated. When prostate cancer spreads from its original place to another part of the body the new tumor has the same kind of abnormal cells and the same name as the primary original tumor. DRE The digital rectal examination DRE helps your doctor find prostate problems. Upon seeing any abnormality in the PSA and DRE test results doctor recommends Prostate biopsy. The grading system recognizes three categories 3 4 and 5. Intermediate levels can be created by downsampling a higher resolution level. They help to find prostate cancer early before it spreads. com wouterbulten getting started with the panda dataset https www. A rise in PSA level does not tell us the type of cancer cells present. The label masks are stored in an RGB format so that they can be easily opened by image readers. Display the image Close the opened slide after use Here we compute the pixel spacing the physical size of a pixel in the image. Small glands infiltrate between benign glands. This assumption might lead a man to think his cancer is more likely to grow and spread quickly than it really is which might affect his decisions about treatment. C Prostatic adenocarcinoma Gleason Pattern 4 has partial loss of glandular differentiation. The dimensions of each level differ based on the dimensions of the original image. Q 11 How has the Gleason scores been generated in the dataset Each WSI in this challenge contains one or in some cases two thin tissue sections cut from a single biopsy sample. Your doctor will also consider your family history of prostate cancer ethnicity biopsy history and other health factors. A biopsy is a type of minor surgery. Eight out of ten autopsy cancers found are small with tumors that are not harmful. During ejaculation sperm is made in the testicles and then moves to the urethra. Prior to scanning the tissue is stained with haematoxylin eosin H E. com gpreda panda challenge starting eda This kernel will be a work in Progress and I will keep on updating it as the competition progresses and I learn more and more things about the data Future Work Building a Baseline model If you find this kernel useful Please consider Upvoting it it motivates me to write more Quality content Thank you Happy Kaggling Location of the training images image and mask directories Location of training labels Open the image does not yet read the image into memory Read a specific region of the image starting at upper left coordinate x 17800 y 19500 on level 0 and extracting a 256 256 pixel patch. It should be done with a PSA test. In these cases the way the Gleason score is determined is modified to reflect the aggressive fast growing nature of the cancer. To do this we load both the mask and the biopsy and merge them using PIL. Q 8 So what is Prostat biopsy and how it is done The decision to have a biopsy is based on PSA and DRE results. DRE is safe and easy to do. Now let s deep dive into the Data Let s see the training data Now let s check the number of images types of data provider ISUP Grades and Gleason Scores. The two main types of screenings are PSA Blood Test The prostate specific antigen PSA blood test is one way to screen for prostate cancer. During this test the doctor feels for an abnormal shape or thickness to the prostate. This is likely to help some men live longer. Grades 2 through 4 have features in between these extremes. The organizers left us with a Note as described below. Very little PSA is found in the blood of a man with a healthy prostate. If the cancer looks a lot like normal prostate tissue a grade of 1 is assigned. ", "id": "spidyweb/prostate-cancer-panda-insight-eda", "size": "18279", "language": "python", "html_url": "https://www.kaggle.com/code/spidyweb/prostate-cancer-panda-insight-eda", "git_url": "https://www.kaggle.com/code/spidyweb/prostate-cancer-panda-insight-eda", "script": "IPython.display plotly.express Image numpy seaborn display_masks plot_count plotly mask_img display_images matplotlib.pyplot IFrame overlay_mask_on_slide pandas graph_objs as go graph_objs plotly.figure_factory display get_values YouTubeVideo ", "entities": "(('something', 'PSA'), 'be') (('rise', 'cancer cells'), 'tell') (('that', 'tumors'), 'be') (('that', 'Competition'), 'be') (('Biopsys', 'ISUP more Grade'), 'set') (('They', 'body'), 'travel') (('who', 'cancer cells'), 'be') (('B', 'glandular differentiation'), 'have') (('tissue tissue label benign epithelium combined 2 cancerous masks', 'weakly supervised labels'), 'combine') (('man', 'table'), 'bend') (('even you', 'symptoms'), 'Q') (('which', 'ISUP Grade'), 'let') (('Cancers', '7'), 'call') (('doctor', 'prostate cancer ethnicity biopsy history'), 'consider') (('pixel', 'image'), 'FIGURE') (('hollow which', 'branched WSI'), 'be') (('Intermediate levels', 'resolution higher level'), 'create') (('prostate', 'male reproductive system'), 'q') (('even grade 6 cancers', 'actually lowest practice'), 'assume') (('which', 'ISUP 4 3 two Grades'), 'see') (('almost all slides', 'label additional information'), 'have') (('how we', 'Gleason Score'), 'let') (('we', 'memory'), 'be') (('tumor', 'complete well developed glands'), 'be') (('really which', 'treatment'), 'lead') (('only how biopsy', 'lab'), 'have') (('Prostate cancer', 'PSA most serious high result'), 'be') (('appearance', 'Gleason grading system'), 'form') (('mask Location', '256 pixel 0 256 patch'), 'challenge') (('Autopsy studies', 'prostate'), 'show') (('you', 'growth different patterns'), 'help') (('which', 'tissue'), 'indicate') (('cancer', 'why prostate'), 'cause') (('D Prostatic adenocarcinoma', 'glandular differentiation'), 'have') (('other channels', 'zero'), 'store') (('slightly different procedures', 'training set'), 'note') (('isn t', 'that'), 'lead') (('first we', 'Kaggle Competition'), 'be') (('PSA Blood antigen PSA blood prostate specific test', 'prostate one cancer'), 'be') (('only sure you', 'prostate cancer'), 'be') (('we', '0 competition'), 'develop') (('we', 'PIL'), 'load') (('which', 'that'), 'need') (('tissue two thin sections', 'biopsy single sample'), 'q') (('between scores', '6'), 'be') (('that', 'most tumor'), 'be') (('that', 'prostate gland'), 'q') (('images', 'file extension'), 'try') (('early which', 'cancer'), 'treat') (('it', 'occasionally seminal vesicles'), 'start') (('organizers', 'Note'), 'leave') (('microphotograph', 'cribriform cancer irregular i.'), 'show') (('which', 'disease'), 'look') (('where they', 'damage'), 'attach') (('that', 'PANDA dataset'), 'be') (('directly areas', 'tissue'), 'display') (('it', 'false negative'), 'be') (('DRE', 'early cancer'), 'detect') (('grading system', 'three categories'), 'recognize') (('cancer cells', 'bones'), 'be') (('structure glandular characteristic', 'progressively increasing grade'), 'lose') (('healthcare provider', 'rectum'), 'put') (('Exploring', 'them'), 'mention') (('s', 'images'), 'let') (('C Prostatic adenocarcinoma', 'glandular differentiation'), 'have') (('main job', 'bathe semen'), 'Q') (('how much cancer', 'prostate normal tissue'), 'q') (('Small glands', 'benign glands'), 'infiltrate') (('biopsy when sample', 'grade 3 high cancer'), 'be') (('Gleason Pattern', 'cancer cells'), 'contain') (('scale', 'patients'), 'be') (('prostate', 'rectum'), '2') (('label masks', 'pathologist'), 'generate') (('epithelial unit', 'lumen'), 'be') (('microphotographs', '20x lens magnification'), 'show') (('cancer', 'us'), 'tell') (('cytoplasm', 'often dark chromatin'), 'be') (('PSA', 'only prostate cancers'), 'be') (('Grades', '2 through 4 extremes'), 'feature') (('when you', 'something'), 'be') (('dimensions', 'original image'), 'differ') (('which', 'Radbond'), 'discussion') (('who', 'originally case'), 'be') (('Now s', 'data provider ISUP Grades'), 'let') (('About 1 in 9 men', 'lifetime'), 'diagnose') (('grade', '1'), 'tissue') (('Gleason score', 'cancer'), 'modify') (('test set slides', 'pen marks'), 'have') (('image dimensions', 'quite typically 5'), 'display') (('that', 'penis'), 'form') (('Very little PSA', 'healthy prostate'), 'find') (('reason', 'cancer benign non prostate'), 'be') (('rohitsingh9990 panda com eda', 'baseline https better simple www'), 'visualization') (('men', '9'), 'tend') (('doctor', 'prostate problems'), 'DRE') (('prostate biopsy tiny pieces', 'microscope'), 'remove') (('that', 'cancer'), 'have') (('ejaculation sperm', 'then urethra'), 'make') (('Cancers', '8 to 10'), 'call') (('only when we', 'them'), 'convert') (('you', '1 4'), 'have') (('pixel', 'image'), 'display') (('seminal vesicles', 'also urethra'), 'at') (('2 grades', 'Gleason score'), 'add') (('7 are', 'PSA test'), 'Q') (('All', 'Gleason Pattern'), 'include') (('early it', 'prostate cancer'), 'help') (('Gleason score', '6'), 'divide') (('they', 'image easily readers'), 'store') (('following we', 'OpenSlide'), 'provide') (('new tumor', 'same primary original tumor'), 'have') (('test results PSA doctor', 'Prostate biopsy'), 'upon') (('image data', 'memory'), 'read') (('we', 'disease'), 'gain') (('that', 'penis'), 'be') (('Prostate cancer outcomes', 'just 3 groups'), 'GroupsIn') (('It', 'U.'), 'be') (('this', 'laboratory different procedures'), 'be') (('Gleason 4 3 7 cancer', '3 4 7 cancer'), 'score') (('Finally I', 'kernels'), 'like') (('you', 'interactively slides'), 'want') (('cytoplasm', 'prostate Benign folded epithelium'), 'gland') (('Prostate cancer cells', 'away prostate tumor'), 'spread') (('information', 'centers Radboudumc Prostate two glands'), 'label') (('cancer Dispersed single cells', 'stroma'), 'see') (('samples', 'glandular tissue'), 'make') (('label masks', 'OpenSlide'), 'open') (('we', 'model'), 'share') (('very it', '5'), 'give') (('3 4 they', '7'), 'mean') (('it', 'bone'), 'for') (('prostate', 'about one ounce'), 'be') (('doctor', 'prostate'), 'feel') (('so we', 'microns'), 'give') (('pen markings', 'training set'), 'be') (('Prostatitis inflammation', 'PSA also high results'), 'cause') (('Being', 'better model'), 'help') (('ASAP', 'Overlay functionality'), 'overlay') (('This', 'contrast'), 'be') (('biopsy', 'PSA results'), 'Q') (('you', 'slide dark green smudges'), 'note') (('that', 'problems'), 'detect') "}